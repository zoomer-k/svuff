# Portions Copyright 2023 CHIPS Alliance
# Licensed under the Apache License, Version 2.0 (the "License");
# You may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Additional modifications Copyright 2025 zoomer-k
# Licensed under the MIT License

id: verible_always-comb-blocking
message: Checks that there are no occurrences of non-blocking assignment in combinational logic.
severity:  error
language: systemverilog

rule:
  all:
    - kind: nonblocking_assignment
    - inside:
        kind: always_construct
        has:
          kind: always_keyword
          regex: ^always_comb$
        stopBy: end






note: |
  Combinational logic blocks (e.g., those defined with 'always_comb') describe logic whose outputs respond immediately to changes in inputs.
  Non-blocking assignments ('<=') introduce a delay, scheduling the assignment to happen at the end of the current time step.
  Using non-blocking assignments in 'always_comb' can lead to simulation mismatches between combinational logic and synthesized hardware, making debugging difficult and introducing subtle bugs.
  Always use blocking assignments ('=') for combinational logic.
